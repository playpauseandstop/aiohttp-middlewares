defaults:
  run:
    shell: "bash"

name: "Verify Docs Build Well"

on:
  workflow_call:

jobs:
  build_docs:
    name: "Verify Docs Build Well"

    runs-on: "ubuntu-latest"

    steps:
      - uses: "actions/checkout@v3.0.2"

      - id: "python_and_poetry"
        uses: "./.github/actions/install_python_and_poetry"
        with:
          python-version-file: ".python-version"

      - name: "Install Python"
        uses: "actions/setup-python@v4.2.0"
        with:
          python-version-file: ".python-version"
          cache: "poetry"

      - name: "Install docs dependencies"
        run: "poetry install --only main,docs"

      - name: "Build docs"
        run: "poetry run python3 -m sphinx -b html ./docs/ ./docs/_build/"
